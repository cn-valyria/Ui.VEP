(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{297:function(t,e,n){"use strict";var o=n(3),c=n(298).start;o({target:"String",proto:!0,forced:n(299)},{padStart:function(t){return c(this,t,arguments.length>1?arguments[1]:void 0)}})},298:function(t,e,n){var o=n(4),c=n(56),r=n(14),d=n(202),l=n(22),v=o(d),m=o("".slice),C=Math.ceil,h=function(t){return function(e,n,o){var d,h,f=r(l(e)),_=c(n),E=f.length,y=void 0===o?" ":r(o);return _<=E||""==y?f:((h=v(y,C((d=_-E)/y.length))).length>d&&(h=m(h,0,d)),t?f+h:h+f)}};t.exports={start:h(!1),end:h(!0)}},299:function(t,e,n){var o=n(69);t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(o)},300:function(t,e,n){"use strict";n.r(e);n(37),n(28),n(34),n(54),n(26),n(55);var o=n(8),c=n(11),r=(n(297),n(203),n(143),n(12),n(44),n(86));function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v={props:{show:Boolean,account:{type:Object,default:function(){return{}}}},data:function(){return{buttonIsLoading:!1,accountBeingEdited:Object,roles:[{code:"B",description:"Buyer"},{code:"S",description:"Seller"},{code:"D",description:"Cash Donor"},{code:"F",description:"Tech Farm"},{code:"C",description:"Cash Collector"},{code:"R",description:"Tech Receiver"},{code:"N",description:"Probationary Seller"},{code:"P",description:"Temporary Donor"},{code:"V",description:"Temporary Collector"},{code:"Q",description:"Temporary Farm"},{code:"W",description:"Temporary Receiver"},{code:"H",description:"On Hold"}],validationErrors:[]}},computed:{nationId:{get:function(){return this.accountBeingEdited.nationId},set:function(t){""===t||isNaN(parseInt(t))?(this.$log.debug("Received nationId val ".concat(t,". Setting to empty string")),this.accountBeingEdited.nationId=""):this.accountBeingEdited.nationId=parseInt(t)}},isInUpdateState:function(){return void 0!==this.accountBeingEdited&&void 0!==this.accountBeingEdited.id},foundProspectAccount:function(){return void 0!==this.accountBeingEdited&&void 0!==this.accountBeingEdited.rulerName}},watch:{account:function(t){this.$log.debug(t),this.accountBeingEdited=l({},t)}},methods:l(l({},Object(r.b)({updateAccount:"admin/accounts/updateAccount",createAccount:"admin/accounts/createAccount"})),{},{findProspectAccount:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.buttonIsLoading=!0,e.prev=1,e.next=4,t.$axios.get("/accounts/prospect?nationId=".concat(t.accountBeingEdited.nationId));case 4:n=e.sent,t.$log.debug(n),o=n.data,t.accountBeingEdited=l(l({},t.accountBeingEdited),{},{nationName:o.nationName,rulerName:o.rulerName,allianceName:o.allianceName}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),t.$log.error(e.t0),e.t0.response?t.$toast.error(e.t0.response.data):t.$toast.error("VEP encountered an error while searching for the above nation ID. Please try again, or contact @lilweirdward if the error persists.");case 14:t.buttonIsLoading=!1;case 15:case"end":return e.stop()}}),e,null,[[1,10]])})))()},update:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.buttonIsLoading=!0,t.$log.debug(t.accountBeingEdited),e.prev=2,e.next=5,t.updateAccount(t.accountBeingEdited);case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),t.$log.error(e.t0),t.$toast.error("VEP encountered an error while saving. Please try again, or contact @lilweirdward if the error persists.");case 11:t.buttonIsLoading=!1,t.$emit("close"),t.$toast.success("Account updated successfully!");case 14:case"end":return e.stop()}}),e,null,[[2,7]])})))()},create:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.accountIsValid()){e.next=3;break}return t.$log.error("Account form is invalid and will not be submitted to the API"),e.abrupt("return");case 3:return t.buttonIsLoading=!0,t.$log.debug(t.accountBeingEdited),e.prev=5,e.next=8,t.createAccount(t.accountBeingEdited);case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(5),t.$log.error(e.t0),t.$toast.error("VEP encountered an error while saving. Please try again, or contact @lilweirdward if the error persists.");case 14:t.buttonIsLoading=!1,t.$emit("close"),t.$toast.success("Account created successfully!");case 17:case"end":return e.stop()}}),e,null,[[5,10]])})))()},randomIntFromInterval:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},generateSecretCode:function(){var t=String(this.randomIntFromInterval(1,99999)).padStart(5,"0");this.$set(this.accountBeingEdited,"uniqueCode",t)},accountIsValid:function(){return this.validateProperty("role"),this.validateProperty("uniqueCode",(function(t){return void 0===t||""===t})),this.validateProperty("hasForeignMinistry"),this.validateProperty("hasFederalAidCommission"),this.validateProperty("hasDisasterReliefAgency"),0===this.validationErrors.length},validateProperty:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return void 0===t},n=this.validationErrors.findIndex((function(e){return e.prop===t})),o=e(this.accountBeingEdited[t]),c=n>-1;o&&!c?this.validationErrors.push({prop:t}):!o&&c&&this.validationErrors.splice(n,1)},propertyHasValidationError:function(t){return this.validationErrors.some((function(e){return e.prop===t}))}})},m=v,C=n(38),component=Object(C.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal",class:{"is-active":t.show}},[n("div",{staticClass:"modal-background"}),t._v(" "),n("div",{staticClass:"modal-card"},[n("header",{staticClass:"modal-card-head"},[t.isInUpdateState?n("p",{staticClass:"modal-card-title"},[t._v(t._s(t.account.rulerName)+"'s Account")]):n("p",{staticClass:"modal-card-title"},[t._v("New Account")]),t._v(" "),n("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(e){return t.$emit("close")}}})]),t._v(" "),n("section",{staticClass:"modal-card-body"},[n("div",{staticClass:"content"},[n("h2",[t._v("Account Data")]),t._v(" "),n("fieldset",{attrs:{disabled:t.isInUpdateState}},[n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Nation ID")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.nationId,expression:"nationId"}],staticClass:"input",attrs:{type:"text",placeholder:"The account's NationID"},domProps:{value:t.nationId},on:{input:function(e){e.target.composing||(t.nationId=e.target.value)}}})])])]),t._v(" "),n("fieldset",{attrs:{disabled:""}},[n("div",{staticClass:"field is-horizontal"},[n("div",{staticClass:"field-body"},[n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Nation Name")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.accountBeingEdited.nationName,expression:"accountBeingEdited.nationName"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.accountBeingEdited.nationName},on:{input:function(e){e.target.composing||t.$set(t.accountBeingEdited,"nationName",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Ruler Name")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.accountBeingEdited.rulerName,expression:"accountBeingEdited.rulerName"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.accountBeingEdited.rulerName},on:{input:function(e){e.target.composing||t.$set(t.accountBeingEdited,"rulerName",e.target.value)}}})])])])]),t._v(" "),n("div",{staticClass:"field"},[n("div",{staticClass:"label"},[t._v("Alliance Name")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.accountBeingEdited.allianceName,expression:"accountBeingEdited.allianceName"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.accountBeingEdited.allianceName},on:{input:function(e){e.target.composing||t.$set(t.accountBeingEdited,"allianceName",e.target.value)}}})])])]),t._v(" "),t.isInUpdateState||t.foundProspectAccount?n("fieldset",[n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Role")]),t._v(" "),n("div",{staticClass:"control is-expanded"},[n("div",{staticClass:"select is-fullwidth",class:{"is-danger":t.propertyHasValidationError("role")}},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.accountBeingEdited.role,expression:"accountBeingEdited.role"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.accountBeingEdited,"role",e.target.multiple?n:n[0])}}},[n("option",{attrs:{disabled:"",value:""}}),t._v(" "),t._l(t.roles,(function(e){return n("option",{key:e.code,domProps:{value:e.code}},[t._v("\n                    "+t._s(e.description)+"\n                  ")])}))],2)])]),t._v(" "),t.propertyHasValidationError("role")?n("p",{staticClass:"help is-danger"},[t._v("\n              Every account must have a role that they are enrolled as\n            ")]):t._e()]),t._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Secret Code")]),t._v(" "),n("div",{staticClass:"field has-addons"},[n("div",{staticClass:"control is-expanded"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.accountBeingEdited.uniqueCode,expression:"accountBeingEdited.uniqueCode"}],staticClass:"input",class:{"is-danger":t.propertyHasValidationError("uniqueCode")},attrs:{type:"text"},domProps:{value:t.accountBeingEdited.uniqueCode},on:{input:function(e){e.target.composing||t.$set(t.accountBeingEdited,"uniqueCode",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"control"},[n("button",{staticClass:"button is-info",on:{click:function(e){return t.generateSecretCode()}}},[t._v("\n                  Generate\n                ")])])]),t._v(" "),t.propertyHasValidationError("uniqueCode")?n("p",{staticClass:"help is-danger"},[t._v("\n              Every account must have a unique code provided\n            ")]):t._e()]),t._v(" "),n("div",{staticClass:"field is-horizontal"},[n("div",{staticClass:"field-body"},[n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Discord ID")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.accountBeingEdited.discord,expression:"accountBeingEdited.discord"}],staticClass:"input",attrs:{type:"text",placeholder:"e.g. username:1234"},domProps:{value:t.accountBeingEdited.discord},on:{input:function(e){e.target.composing||t.$set(t.accountBeingEdited,"discord",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Discord Discriminator")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.accountBeingEdited.discordUniqueId,expression:"accountBeingEdited.discordUniqueId"}],staticClass:"input",attrs:{type:"text",placeholder:"e.g. 318737615257993226"},domProps:{value:t.accountBeingEdited.discordUniqueId},on:{input:function(e){e.target.composing||t.$set(t.accountBeingEdited,"discordUniqueId",e.target.value)}}})])])])]),t._v(" "),n("div",{staticClass:"field"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Has Foreign Ministry?")]),t._v(" "),n("label",{staticClass:"radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.accountBeingEdited.hasForeignMinistry,expression:"accountBeingEdited.hasForeignMinistry"}],attrs:{type:"radio",name:"hasForeignMinistry"},domProps:{value:!0,checked:t._q(t.accountBeingEdited.hasForeignMinistry,!0)},on:{change:function(e){return t.$set(t.accountBeingEdited,"hasForeignMinistry",!0)}}}),t._v("\n                Yes\n              ")]),t._v(" "),n("label",{staticClass:"radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.accountBeingEdited.hasForeignMinistry,expression:"accountBeingEdited.hasForeignMinistry"}],attrs:{type:"radio",name:"hasForeignMinistry"},domProps:{value:!1,checked:t._q(t.accountBeingEdited.hasForeignMinistry,!1)},on:{change:function(e){return t.$set(t.accountBeingEdited,"hasForeignMinistry",!1)}}}),t._v("\n                No\n              ")])]),t._v(" "),t.propertyHasValidationError("hasForeignMinistry")?n("p",{staticClass:"help is-danger"},[t._v("\n              Must indicate if the nation has the FM improvement or not\n            ")]):t._e()]),t._v(" "),n("div",{staticClass:"field"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Has Federal Aid Commission?")]),t._v(" "),n("label",{staticClass:"radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.accountBeingEdited.hasFederalAidCommission,expression:"accountBeingEdited.hasFederalAidCommission"}],attrs:{type:"radio",name:"hasFederalAidCommission"},domProps:{value:!0,checked:t._q(t.accountBeingEdited.hasFederalAidCommission,!0)},on:{change:function(e){return t.$set(t.accountBeingEdited,"hasFederalAidCommission",!0)}}}),t._v("\n                Yes\n              ")]),t._v(" "),n("label",{staticClass:"radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.accountBeingEdited.hasFederalAidCommission,expression:"accountBeingEdited.hasFederalAidCommission"}],attrs:{type:"radio",name:"hasFederalAidCommission"},domProps:{value:!1,checked:t._q(t.accountBeingEdited.hasFederalAidCommission,!1)},on:{change:function(e){return t.$set(t.accountBeingEdited,"hasFederalAidCommission",!1)}}}),t._v("\n                No\n              ")])]),t._v(" "),t.propertyHasValidationError("hasFederalAidCommission")?n("p",{staticClass:"help is-danger"},[t._v("\n              Must indicate if the nation has the FAC wonder or not\n            ")]):t._e()]),t._v(" "),n("div",{staticClass:"field"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Has Disaster Relief Agency?")]),t._v(" "),n("label",{staticClass:"radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.accountBeingEdited.hasDisasterReliefAgency,expression:"accountBeingEdited.hasDisasterReliefAgency"}],attrs:{type:"radio",name:"hasDisasterReliefAgency"},domProps:{value:!0,checked:t._q(t.accountBeingEdited.hasDisasterReliefAgency,!0)},on:{change:function(e){return t.$set(t.accountBeingEdited,"hasDisasterReliefAgency",!0)}}}),t._v("\n                Yes\n              ")]),t._v(" "),n("label",{staticClass:"radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.accountBeingEdited.hasDisasterReliefAgency,expression:"accountBeingEdited.hasDisasterReliefAgency"}],attrs:{type:"radio",name:"hasDisasterReliefAgency"},domProps:{value:!1,checked:t._q(t.accountBeingEdited.hasDisasterReliefAgency,!1)},on:{change:function(e){return t.$set(t.accountBeingEdited,"hasDisasterReliefAgency",!1)}}}),t._v("\n                No\n              ")])]),t._v(" "),t.propertyHasValidationError("hasDisasterReliefAgency")?n("p",{staticClass:"help is-danger"},[t._v("\n              Must indicate if the nation has the DRA wonder or not\n            ")]):t._e()]),t._v(" "),t.isInUpdateState?n("div",[n("h2",[t._v("Transactional Data")]),t._v(" "),n("fieldset",{attrs:{disabled:""}},[n("div",{staticClass:"field is-horizontal"},[n("div",{staticClass:"field-body"},[n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Slots Free")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{staticClass:"input",attrs:{type:"text"},domProps:{value:t.accountBeingEdited.slotsFull-t.accountBeingEdited.slotsUsed}})])]),t._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Slots Full")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{staticClass:"input",attrs:{type:"text"},domProps:{value:t.accountBeingEdited.slotsFull}})])])])]),t._v(" "),n("div",{staticClass:"field is-horizontal"},[n("div",{staticClass:"field-body"},[n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Credit")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{staticClass:"input",attrs:{type:"text"},domProps:{value:t.accountBeingEdited.credit}})])]),t._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Debt")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{staticClass:"input",attrs:{type:"text"},domProps:{value:t.accountBeingEdited.debt}})])]),t._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Balance")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{staticClass:"input",attrs:{type:"text"},domProps:{value:t.accountBeingEdited.balance}})])])])]),t._v(" "),n("div",{staticClass:"field is-horizontal"},[n("div",{staticClass:"field-body"},[n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Cash Sent (Cash)")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{staticClass:"input",attrs:{type:"text"},domProps:{value:t.accountBeingEdited.cashSentCashCredit}})])]),t._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Cash Rec'd (Cash)")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{staticClass:"input",attrs:{type:"text"},domProps:{value:t.accountBeingEdited.cashReceivedCashCredit}})])]),t._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Tech Sent (Cash)")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{staticClass:"input",attrs:{type:"text"},domProps:{value:t.accountBeingEdited.techSentCashCredit}})])]),t._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Tech Rec'd (Cash)")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{staticClass:"input",attrs:{type:"text"},domProps:{value:t.accountBeingEdited.techReceivedCashCredit}})])])])]),t._v(" "),n("div",{staticClass:"field is-horizontal"},[n("div",{staticClass:"field-body"},[n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Cash Sent (Tech)")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{staticClass:"input",attrs:{type:"text"},domProps:{value:t.accountBeingEdited.cashSentTechCredit}})])]),t._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Cash Rec'd (Tech)")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{staticClass:"input",attrs:{type:"text"},domProps:{value:t.accountBeingEdited.cashReceivedTechCredit}})])]),t._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Tech Sent (Tech)")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{staticClass:"input",attrs:{type:"text"},domProps:{value:t.accountBeingEdited.techSentTechCredit}})])]),t._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Tech Rec'd (Tech)")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{staticClass:"input",attrs:{type:"text"},domProps:{value:t.accountBeingEdited.techReceivedTechCredit}})])])])])])]):t._e()]):t._e()])]),t._v(" "),n("footer",{staticClass:"modal-card-foot"},[t.isInUpdateState?n("button",{staticClass:"button is-success",class:{"is-loading":t.buttonIsLoading},on:{click:function(e){return t.update()}}},[t._v("\n        Save\n      ")]):t.foundProspectAccount?n("button",{staticClass:"button is-success",class:{"is-loading":t.buttonIsLoading},on:{click:function(e){return t.create()}}},[t._v("\n        Create\n      ")]):n("button",{staticClass:"button is-success",class:{"is-loading":t.buttonIsLoading},on:{click:function(e){return t.findProspectAccount()}}},[t._v("\n        Search\n      ")]),t._v(" "),n("button",{staticClass:"button",on:{click:function(e){return t.$emit("close")}}},[t._v("Cancel")])])])])}),[],!1,null,null,null);e.default=component.exports}}]);